<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sunny.promotion.dao.ParticipateMapper">

   <insert id="InsertParticipateList" parameterType="com.sunny.promotion.vo.PromotionVO">
        INSERT into Participate
        VALUES
        (#{promoId},#{joinUserId},#{purchaseId},#{joinDate},NULL)
   </insert>
        
    <select id="getInfoUseridPromoId" parameterType="map" resultType="Integer">
       SELECT COUNT(*) 
       FROM Participate
       WHERE join_user_id = #{userId}
       AND promo_id = #{promotionId}
    </select> 
        
        
    <select id="getParticipateUserInfo"  parameterType="String" resultType="map">
		
		SELECT user_id userId, 
			   user_name userName, 
			   gender gerder,
			   age age,
			   DATE(join_date) joinDate,
			   join_from joinFrom
		fROM Participate, User
		WHERE promo_id = #{promotionId}
		AND join_user_id = user_id
		order by join_date;
		        
    </select> 
        
</mapper>

 